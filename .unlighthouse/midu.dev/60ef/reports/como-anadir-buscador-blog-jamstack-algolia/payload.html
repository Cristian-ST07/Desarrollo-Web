<!doctype html><html lang=es><head><meta charset=utf-8><meta name=viewport content="width=device-width,minimum-scale=1,initial-scale=1"><title>Cómo añadir un buscador en tu blog JamStack con Algolia</title><link rel=preconnect href=https://i3.ytimg.com><link rel=preconnect href=https://res.cloudinary.com><style>:root{--c-topic:#000;--fz-aside:14px;--fz-section-title:18px;--mw-document:800px;--p-header-bottom:16px;--p-separation:96px;--p-u-center:0 32px;--w-aside:320px;--dark-background:#20252C;--dark-color-hover:#3c4654;--dark-text:#fafafa;--dark-text-secondary:#eee}html{box-sizing:border-box;scroll-behavior:smooth}*,*:after,*:before{box-sizing:inherit}fieldset{border:0;margin:0;padding:0}*::selection{background:rgba(6,125,247,.15)}pre::selection,code::selection{background:#09f;text-shadow:none;opacity:.3}body{font-family:-apple-system,BlinkMacSystemFont,segoe ui,Roboto,Helvetica,Arial,sans-serif,apple color emoji,segoe ui emoji,segoe ui symbol;display:block;margin:0 auto;min-height:100vh;overflow-x:hidden;width:100%;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}body::before{content:'';background:rgb(0 153 255/.1);filter:blur(100px);width:300px;height:300px;position:absolute;left:-50px;top:100px;z-index:-1}blockquote{margin:0}h1,h2,h3,h4,figure,p,ul,li{margin:0;padding:0}a,a:hover{text-decoration:none}img{width:100%;height:auto}iframe{border:0}.u-none{display:none!important}.u-center{max-width:var(--mw-document);margin:0 auto;padding:var(--p-u-center)}.section-title{color:#111;font-weight:700;font-size:var(--fz-section-title);padding-bottom:8px}.section-description{color:#555;font-size:14px;line-height:1.5}.header{margin-bottom:32px;position:relative;z-index:3}.header-inner{align-items:center;display:flex;justify-content:space-between;padding-top:16px;padding-bottom:var(--p-header-bottom)}#searchbox{display:none}@media(min-width:600px){#searchbox{display:block}}#nav{align-items:center;display:flex}#nav a{border:1px solid transparent;color:#222;padding:10px 6px}@media(min-width:600px){#nav a{padding:10px 12px}}#nav .page-links{font-size:var(--fz-page-links)}#nav a:hover{background:#fff;color:#000;border-radius:6px;border:1px solid #09f;cursor:pointer}.body{display:flex}hr{background:#ccc;border:0;height:1px;margin-bottom:32px}hr.section-separation{background:0 0}footer{background:#f1f5f9;padding-top:32px;text-align:center;padding:64px 0 86px;position:relative}footer .u-center{padding-top:32px}footer a{color:#555;margin-right:16px}footer a:hover{color:#222}.footer-emote{width:36px;height:36px;object-fit:contain;position:absolute;bottom:0;left:0;right:0;margin:auto}svg{vertical-align:middle}#article{max-width:800px;margin:0 auto;width:100%}#article-content-wrapper{display:flex}#article-content{flex:1 1;padding-bottom:32px}#article-content blockquote{background:#fdffb7;border-radius:6px;padding:16px;margin-top:48px;margin-bottom:32px;box-shadow:0 20px 20px rgba(100,100,100,.1)}#article-content blockquote p{color:#000;font-size:16px;margin:0;padding:0}#article-content p,#article-content li{color:#333;font-size:18px;line-height:28px;margin:0 auto;margin-bottom:32px;word-break:break-word}#article-content ul+.highlight{margin-top:24px}#article-content p+ul{margin-top:-16px}#article-content ul{padding-left:24px;padding-bottom:16px}#article-content li{color:#555;margin-bottom:4px;padding-bottom:0}#article-content h2,#article-content h3,#article-content h4,#article-content h5{color:#0068b8;font-size:24px;font-weight:600;margin:48px 0 24px}#article-content h3{color:#0e578f;font-size:22px;margin-top:16px}#article-content h4{color:#09395e;font-size:20px;margin-top:16px}#article-content a{border-bottom:2px solid #dff2ff;color:#0081d7;opacity:7}#article-content a:hover{background-color:#d8f0ff;border-bottom-color:#00f;color:#00f;opacity:1}#article iframe{margin-bottom:16px}.youtube-iframe,.highlight{box-shadow:0 20px 60px rgba(0,0,0,.3)}#logo,#logo img{height:44px;transition:transform ease .3s;width:auto}#logo:hover{transform:scale(1.1)}.button{background-color:#1890ff!important;border-color:#1890ff;border-radius:4px;border:0;box-shadow:0 2px #0000000b;color:#fff;cursor:pointer;font-size:16px;height:40px;line-height:38px;outline:0;padding:0 15px;text-align:center;text-decoration:none;text-shadow:0 -1px 0 rgba(0,0,0,.12);width:100%}.button:hover{background:#006fba;border-color:#006fba}.input{background-color:#fff;background-image:none;border-radius:4px;border:1px solid #d9d9d9;box-sizing:border-box;color:rgba(0,0,0,.65);display:inline-block;font-feature-settings:'tnum';font-size:14px;font-variant:tabular-nums;height:32px;line-height:32px;list-style:none;margin:0;outline:0;padding:4px 11px;transition:all .3s;width:100%}.button:focus,.input:focus{border-color:#40a9ff;box-shadow:0 0 0 4px rgba(24,144,255,.2)}#aside-sticky{top:48px;position:sticky}#newsletter-form{margin-bottom:32px;padding:24px;border:2px solid #eee;border-radius:5px;text-align:center}#newsletter-form small{padding-bottom:12px;display:block}#newsletter-form h3{margin-bottom:12px}#newsletter-form input{border-radius:5000px;padding-left:16px}#newsletter-form button{position:absolute;right:0;width:100px;overflow:hidden;bottom:0;height:32px;cursor:pointer;font-weight:700;background:#09f;color:#fff;border-radius:0 5000px 5000px 0;border:0;top:0}#article-header{align-items:center;display:flex;margin-bottom:36px;position:relative}#article-header h1{color:#111;font-size:36px;line-height:1.1;font-weight:600}#article-header picture{height:200px;opacity:.1;position:absolute;right:0;width:200px}#article-header img{object-fit:contain;height:100%;width:100%}@media(min-width:700px){#article-header picture,#article-header img{width:100px;height:100px;margin-right:16px;object-fit:contain;position:static;opacity:1}}#article-meta{color:#777;font-size:12px;margin-top:8px}#article-meta a{border:0;color:#000;display:block;font-weight:600;margin-top:8px;opacity:.7}@media(min-width:600px){#article-meta a{display:inline-block;margin:0}}#article-meta a:hover{background:0 0;opacity:1;text-decoration:underline}#article-meta svg{margin-left:4px;width:18px}#article-pagination{display:flex;flex-wrap:wrap;justify-content:center;margin-top:48px;text-align:center}#article-pagination a{align-items:center;border-radius:6px;border:2px solid #eee;color:#000;font-weight:500;display:flex;flex-direction:column;justify-content:center;margin:16px;max-width:300px;padding:24px 16px;transition:all .2s ease}#article-pagination a:hover,#article-pagination a:focus{background:#e8f6ff;border:2px solid #09f;color:#000;text-decoration:none}#article-pagination img{width:64px;margin-bottom:16px}figure{margin:auto;padding-bottom:16px}ul+figure{margin-top:16px}figure+ul{margin-top:16px}figure img+figcaption{padding-top:4px}figcaption{color:#666;display:block;font-size:14px;font-style:italic;text-align:center}figure.center{max-width:500px}figure.left{float:left;max-width:50%;padding:0 16px 0 0}figure.left p{padding:0}figure.left img{height:auto;width:100%}#lightbox{position:fixed;z-index:9999;width:100%;height:100%;text-align:center;top:0;left:0;background:rgba(0,0,0,.8)}#lightbox section{align-items:center;display:flex;height:100vh;max-width:90%;width:100%;margin:0 auto}#lightbox div{position:relative;padding-bottom:56.25%;height:0;width:100%}#lightbox a{cursor:alias;left:0;position:absolute;width:100%;height:100%}#lightbox svg{position:absolute;top:16px;right:16px}#lightbox iframe{position:absolute;top:0;left:0;width:100%;height:100%}#aside{flex:0 0 var(--w-aside)}#aside .cover{aspect-ratio:16/9}#aside a{border-radius:4px;display:block;outline:0;position:relative;margin-left:-8px;padding:8px;text-align:left}#aside a:hover{background:#eee;color:#111}#aside img{border-radius:4px;object-fit:cover}#aside h4{color:#333;font-size:14px;font-weight:600;line-height:140%}.youtube-title{align-items:center;display:flex;justify-content:space-between}@media screen and (max-width:1300px){:root{--mw-document:100%}}@media screen and (max-width:1023px){:root{--p-separation:0;--w-aside:100%}.body,#article-content-wrapper{flex-direction:column}}@media screen and (max-width:700px){:root{--p-u-center:0 16px;--p-header-bottom:16px}#nav .page-links{display:none}#article-header{display:block!important}}lite-youtube{background-color:#000;position:relative;display:block;contain:content;background-position:50%;background-size:cover;cursor:pointer;max-width:720px}lite-youtube::before{content:'';display:block;position:absolute;top:0;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAADGCAYAAAAT+OqFAAAAdklEQVQoz42QQQ7AIAgEF/T/D+kbq/RWAlnQyyazA4aoAB4FsBSA/bFjuF1EOL7VbrIrBuusmrt4ZZORfb6ehbWdnRHEIiITaEUKa5EJqUakRSaEYBJSCY2dEstQY7AuxahwXFrvZmWl2rh4JZ07z9dLtesfNj5q0FU3A5ObbwAAAABJRU5ErkJggg==);background-position:top;background-repeat:repeat-x;height:110px;padding-bottom:50px;width:100%;transition:all .2s cubic-bezier(0,0,.2,1)}lite-youtube::after{content:"";display:block;padding-bottom:56.25%}lite-youtube>iframe{width:100%;height:100%;position:absolute;top:0;left:0;border:0}lite-youtube>.lty-playbtn{width:68px;height:48px;position:absolute;transform:translate3d(-50%,-50%,0);top:50%;left:50%;z-index:1;background-color:transparent;background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 68 48"><path fill="%23f00" fill-opacity="0.8" d="M66.52,7.74c-0.78-2.93-2.49-5.41-5.42-6.19C55.79,.13,34,0,34,0S12.21,.13,6.9,1.55 C3.97,2.33,2.27,4.81,1.48,7.74C0.06,13.05,0,24,0,24s0.06,10.95,1.48,16.26c0.78,2.93,2.49,5.41,5.42,6.19 C12.21,47.87,34,48,34,48s21.79-0.13,27.1-1.55c2.93-0.78,4.64-3.26,5.42-6.19C67.94,34.95,68,24,68,24S67.94,13.05,66.52,7.74z"></path><path d="M 45,24 27,14 27,34" fill="%23fff"></path></svg>');filter:grayscale(100%);transition:filter .1s cubic-bezier(0,0,.2,1);border:none}lite-youtube:hover>.lty-playbtn,lite-youtube .lty-playbtn:focus{filter:none}lite-youtube.lyt-activated{cursor:unset}lite-youtube.lyt-activated::before,lite-youtube.lyt-activated>.lty-playbtn{opacity:0;pointer-events:none}.lyt-visually-hidden{clip:rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px}twitter-widget{margin:0 auto}.twitter-tweet{margin:0 auto}.ais-InstantSearch{position:relative}.ais-SearchBox-input{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#fff;border:1px solid #eee;border-radius:5000px;box-shadow:none;caret-color:#5a5e9a;color:#23263b;flex:1;font:inherit;max-width:100%;padding-left:2.5rem;margin-right:1rem;transition:box-shadow .2s ease}.ais-SearchBox-input:focus{outline:0;box-shadow:0 0 10px rgb(0 153 255/.3);border:1px solid transparent}#hits{position:absolute;z-index:3}.ais-SearchBox-input::-ms-clear,.ais-SearchBox-input::-ms-reveal{display:none;width:0;height:0}.ais-SearchBox-input::-webkit-search-cancel-button,.ais-SearchBox-input::-webkit-search-decoration,.ais-SearchBox-input::-webkit-search-results-button,.ais-SearchBox-input::-webkit-search-results-decoration{display:none}.ais-SearchBox-form{display:flex;font-size:.875rem;height:2rem;line-height:1rem;position:relative;width:100%}.ais-SearchBox-form::before{background:url(data:image/svg+xml;utf8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiMwOWYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48Y2lyY2xlIGN4PSIxMSIgY3k9IjExIiByPSI4Ii8+PGxpbmUgeDE9IjIxIiB5MT0iMjEiIHgyPSIxNi42NSIgeTI9IjE2LjY1Ii8+PC9zdmc+)repeat;content:"";height:1rem;left:1rem;margin-top:-.5rem;position:absolute;top:50%;width:1rem}.ais-SearchBox-loadingIndicator[hidden],#hits[hidden],.ais-SearchBox-reset[hidden],.ais-SearchBox-submit{display:none}.ais-SearchBox-loadingIndicator,.ais-SearchBox-reset{align-items:center;background:0 0;border-radius:50%;border:0;cursor:pointer;display:flex;fill:#09f;height:20px;justify-content:center;position:absolute;right:1.5rem;top:50%;transform:translateY(-50%);width:20px}.ais-Hits-list{margin:0;padding:0;list-style:none}.ais-Hits-item{align-items:center;background:#fff;box-shadow:0 0 0 1px rgb(35 38 59/5%),0 1px 3px rgb(35 38 59/15%);display:flex;font-size:.875rem;font-weight:400;line-height:1.25rem;padding:.5rem}.ais-Hits-item em{background:#d0ecff}html[scheme=dark-mode] body{background:var(--dark-background)}html[scheme=dark-mode] h1,html[scheme=dark-mode] h2,html[scheme=dark-mode] h3{color:var(--dark-text)}html[scheme=dark-mode] img#midudev-logo{content:url(/logo-dark.png)!important}html[scheme=dark-mode] a#emoticon-mode::after{content:'🌚'!important}a#emoticon-mode{font-size:x-large}html[scheme=light-mode] a#emoticon-mode::after{content:'🌞'!important}html[scheme=dark-mode] .ais-SearchBox-input{background-color:var(--dark-background);border-color:var(--dark-color-hover);color:var(--dark-text)}html[scheme=dark-mode] .home-article:hover,#aside a:hover{background:var(--dark-color-hover)!important}html[scheme=dark-mode] #TableOfContents ul li.active a,html[scheme=dark-mode] #TableOfContents a:hover{color:#ff0;background:0 0}html[scheme=dark-mode] :not(pre)>code{background:var(--dark-text)!important}html[scheme=dark-mode] .section-title{color:var(--dark-text)}html[scheme=dark-mode] .home-article h2,html[scheme=dark-mode] .home-article .meta,html[scheme=dark-mode] #article-content p,html[scheme=dark-mode] #article-content li,html[scheme=dark-mode] #aside h4,html[scheme=dark-mode] .section-description{color:var(--dark-text-secondary)!important}html[scheme=dark-mode] .home-article:hover h2{color:var(--dark-text)!important}html[scheme=dark-mode] .ais-Hits-item{background:var(--dark-color-hover)}html[scheme=dark-mode] #nav a{color:var(--dark-text)}html[scheme=dark-mode] #nav a:hover{color:var(--dark-text);background:var(--dark-color-hover)}html[scheme=dark-mode] #article-content a:hover{color:#09f;border-color:#09f;background-color:transparent}html[scheme=dark-mode] #article-header h1,html[scheme=dark-mode] #article-meta a,html[scheme=dark-mode] #article-content a,html[scheme=dark-mode] #article-content h2,html[scheme=dark-mode] #article-content h3,html[scheme=dark-mode] #article-content h4,html[scheme=dark-mode] #article-content h5,html[scheme=dark-mode] #article-meta{color:var(--dark-text)}html[scheme=dark-mode] #article-content blockquote p,html[scheme=dark-mode] #article-content blockquote a{color:var(--dark-color-hover)!important}html[scheme=dark-mode] #article-pagination a{color:var(--dark-text-secondary)!important;background:0 0}html[scheme=dark-mode] .podcast-subscribe-title{color:var(--dark-text)!important}html[scheme=dark-mode] .topic{background:0 0!important;color:var(--dark-text-secondary)!important}html[scheme=dark-mode] .topic:hover{color:#09f!important}html[scheme=dark-mode] footer{background:0 0}html[scheme=dark-mode] footer a{color:var(--dark-text-secondary)}html[scheme=dark-mode] footer a:hover{color:var(--dark-text)}html[scheme=dark-mode] #newsletter-form{border-color:var(--dark-text-secondary);background:var(--dark-text-secondary)}html[scheme=dark-mode] #newsletter-form h3{color:var(--dark-background)}html[scheme=dark-mode] #newsletter-form small{color:var(--dark-text)}html[scheme=dark-mode] #TableOfContents a{color:rgba(255,255,255,.896)}.header{view-transition-name:header;contain:layout}@keyframes fade-in{from{opacity:0}}@keyframes fade-out{to{opacity:0}}@keyframes slide-from-up{from{transform:translateY(30px)}}@keyframes slide-to-bottom{to{transform:translateY(-30px)}}@keyframes slide-from-left{from{transform:translateX(30px)}}@keyframes slide-to-right{to{transform:translateX(-30px)}}::view-transition-old(root){animation:90ms cubic-bezier(.4,0,1,1)both fade-out,300ms cubic-bezier(.4,0,.2,1)both slide-to-bottom}::view-transition-new(root){animation:210ms cubic-bezier(0,0,.2,1)90ms both fade-in,300ms cubic-bezier(.4,0,.2,1)both slide-from-up}html.section-posts-animation::view-transition-old(root){animation:none;mix-blend-mode:normal}html.section-posts-animation::view-transition-new(root){animation:none;mix-blend-mode:normal}html.section-posts-animation .section-posts{view-transition-name:section-posts}html.section-posts-animation::view-transition-old(section-posts){animation:90ms cubic-bezier(.4,0,1,1)both fade-out,300ms cubic-bezier(.4,0,.2,1)both slide-to-right}html.section-posts-animation::view-transition-new(section-posts){animation:210ms cubic-bezier(0,0,.2,1)90ms both fade-in,300ms cubic-bezier(.4,0,.2,1)both slide-from-left}</style><style>*,::before,::after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::before,::after{--tw-content:''}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,apple color emoji,segoe ui emoji,segoe ui symbol,noto color emoji;font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,liberation mono,courier new,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]{display:none}*,::before,::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.container{width:100%}@media(min-width:640px){.container{max-width:640px}}@media(min-width:768px){.container{max-width:768px}}@media(min-width:1024px){.container{max-width:1024px}}@media(min-width:1280px){.container{max-width:1280px}}@media(min-width:1536px){.container{max-width:1536px}}.visible{visibility:visible}.invisible{visibility:hidden}.static{position:static}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.mb-4{margin-bottom:1rem}.block{display:block}.inline{display:inline}.flex{display:flex}.table{display:table}.grid{display:grid}.inline-grid{display:inline-grid}.hidden{display:none}.flex-grow{flex-grow:1}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y))rotate(var(--tw-rotate))skewX(var(--tw-skew-x))skewY(var(--tw-skew-y))scaleX(var(--tw-scale-x))scaleY(var(--tw-scale-y))}.resize{resize:both}.flex-wrap{flex-wrap:wrap}.border{border-width:1px}.uppercase{text-transform:uppercase}.capitalize{text-transform:capitalize}.italic{font-style:italic}.outline{outline-style:solid}.blur{--tw-blur:blur(8px);filter:var(--tw-blur)var(--tw-brightness)var(--tw-contrast)var(--tw-grayscale)var(--tw-hue-rotate)var(--tw-invert)var(--tw-saturate)var(--tw-sepia)var(--tw-drop-shadow)}.invert{--tw-invert:invert(100%);filter:var(--tw-blur)var(--tw-brightness)var(--tw-contrast)var(--tw-grayscale)var(--tw-hue-rotate)var(--tw-invert)var(--tw-saturate)var(--tw-sepia)var(--tw-drop-shadow)}.filter{filter:var(--tw-blur)var(--tw-brightness)var(--tw-contrast)var(--tw-grayscale)var(--tw-hue-rotate)var(--tw-invert)var(--tw-saturate)var(--tw-sepia)var(--tw-drop-shadow)}.transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:150ms}</style><link rel=preload as=image href=/logo.png><meta name=description content="Te voy a explicar paso a paso cómo he añadido en mi blog hecho con JamStack un buscador gracias a Algolia"><link rel=canonical href=https://midu.dev/como-anadir-buscador-blog-jamstack-algolia/><link rel=icon href=/favicon/favicon.ico type=image/x-icon><link rel=apple-touch-icon sizes=180x180 href=/favicon/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon/favicon-16x16.png><meta name=apple-mobile-web-app-title content="midu.dev"><meta name=application-name content="midu.dev"><meta name=theme-color content="#0099ff"><meta property="og:url" content="https://midu.dev/como-anadir-buscador-blog-jamstack-algolia/"><meta property="og:type" content="article"><meta name=twitter:card content="summary_large_image"><meta name=twitter:creator content="@midudev"><meta name=twitter:domain content="midu.dev"><meta name=twitter:image content="https://midu.dev//images/og/como-anadir-buscador-blog-jamstack-algolia.jpg"><meta name=twitter:site content="@midudev"><link rel=manifest href=/manifest.json><meta property="og:locale" content="es_ES"><meta property="og:title" content="Cómo añadir un buscador en tu blog JamStack con Algolia"><meta property="og:image" content="https://midu.dev//images/og/como-anadir-buscador-blog-jamstack-algolia.jpg"><meta property="og:description" content="Te voy a explicar paso a paso cómo he añadido en mi blog hecho con JamStack un buscador gracias a Algolia"><meta property="og:site_name" content="midu.dev"><script type=application/ld+json>{"@context":"http://schema.org","@type":"NewsArticle","headline":"Cómo añadir un buscador en tu blog JamStack con Algolia","image":["https:\/\/midu.dev\/\/images\/og\/como-anadir-buscador-blog-jamstack-algolia.jpg"],"datePublished":"2021-05-21T00:00:00Z"}</script></head><body><style>#live{background:#9046ffc2;display:none;color:#fff;font-weight:700;text-align:center;padding:8px;animation:background 3s ease infinite;position:fixed;bottom:16px;right:16px;border-radius:8px;z-index:99;box-shadow:0 0 100px 5px rgba(140,0,255,.52)}#live-frame{aspect-ratio:16/9}#live-description{padding-top:4px;font-size:14px}#live a{color:#fff;border-bottom:2px solid #eee}#live button{position:absolute;right:8px;top:-8px;border-radius:9999px;border:0;font-weight:700;padding:4px 8px;font-size:12px;cursor:pointer}#live button:hover{background:#ffffbf}@keyframes background{0%{background:#9046ffc2}50%{background:#d146ff}100%{background:#9046ffc2}}</style><div id=live><button id=live-close>Cerrar 𝖷</button><div id=live-frame></div><div id=live-description><p><svg viewBox="0 0 2400 2800" height="24" width="28"><path fill="#fff" d="M22e2 13e2l-4e2 4e2h-4e2l-350 350v-350H6e2V2e2h16e2z"/><g><path fill="#9146ff" d="M5e2.0.0 5e2v18e2h6e2v5e2l5e2-5e2h4e2l9e2-9e2V0H5e2zm17e2 13e2-4e2 4e2h-4e2l-350 350v-350H6e2V2e2h16e2v11e2z"/><path fill="#9146ff" d="M17e2 550h2e2v6e2h-2e2zm-550 0h2e2v6e2h-2e2z"/></g></svg>¡Estamos en directo en Twitch!</p><p><a href=https://twitch.tv/midudev target=_blank>¡Entra y participa!</a></p></div></div></div><header class='mb-4 header'><div class='header-inner u-center'><a id=logo href=/><picture><img decoding=async id=midudev-logo alt="midudev logo" width=155 height=44 src=/logo.png></picture></a><nav id=nav><div><div id=hits><div class=ais-Hits><ol class=ais-Hits-list></ol></div></div></div><a rel="noopener nofollow" id=emoticon-mode></a>
<a href=https://twitch.tv/midudev target=_blank rel="noopener nofollow" aria-label='Sígueme en Twitch'><svg viewBox="0 0 2400 2800" height="24" width="28"><style>.twitch-st1{fill:#9146ff}</style><path fill="#fff" d="M22e2 13e2l-4e2 4e2h-4e2l-350 350v-350H6e2V2e2h16e2z"/><g><path class="twitch-st1" d="M5e2.0.0 5e2v18e2h6e2v5e2l5e2-5e2h4e2l9e2-9e2V0H5e2zm17e2 13e2-4e2 4e2h-4e2l-350 350v-350H6e2V2e2h16e2v11e2z"/><path class="twitch-st1" d="M17e2 550h2e2v6e2h-2e2zm-550 0h2e2v6e2h-2e2z"/></g></svg></a><a href="https://www.youtube.com/c/midudev?sub_confirmation=1" target=_blank rel="noopener nofollow" aria-label='Suscríbete al canal de midudev'><svg viewBox="0 0 24 24" width="24"><path d="M23.495 6.205a3.007 3.007.0 00-2.088-2.088c-1.87-.501-9.396-.501-9.396-.501s-7.507-.01-9.396.501A3.007 3.007.0 00.527 6.205 31.247 31.247.0 00.005 12.01a31.247 31.247.0 00.522 5.783 3.007 3.007.0 002.088 2.088c1.868.502 9.396.502 9.396.502s7.506.0 9.396-.502a3.007 3.007.0 002.088-2.088 31.247 31.247.0 00.5-5.783 31.247 31.247.0 00-.5-5.805zM9.609 15.601V8.408l6.264 3.602z" fill="red"/></svg></a><a href=https://www.instagram.com/midu.dev/ target=_blank rel="noopener nofollow" aria-label='Sígueme en Instagram'><svg viewBox="0 0 132.004 132" width="24"><defs><radialGradient id="c" cx="158.429" cy="578.088" r="65" fx="158.429" fy="578.088" gradientTransform="matrix(0 -1.98198 1.8439 0 -1031.402 454.004)" gradientUnits="userSpaceOnUse" xlink:href="#a"/><radialGradient id="d" cx="147.694" cy="473.455" r="65" fx="147.694" fy="473.455" gradientTransform="matrix(.17394 .86872 -3.5818 .71718 1648.348 -458.493)" gradientUnits="userSpaceOnUse" xlink:href="#b"/><linearGradient id="b"><stop offset="0" stop-color="#3771c8"/><stop offset=".128" stop-color="#3771c8"/><stop offset="1" stop-color="#60f" stop-opacity="0"/></linearGradient><linearGradient id="a"><stop offset="0" stop-color="#fd5"/><stop offset=".1" stop-color="#fd5"/><stop offset=".5" stop-color="#ff543e"/><stop offset="1" stop-color="#c837ab"/></linearGradient></defs><path fill="url(#c)" d="M65.03.0C37.888.0 29.95.028 28.407.156c-5.57.463-9.036 1.34-12.812 3.22-2.91 1.445-5.205 3.12-7.47 5.468C4 13.126 1.5 18.394.595 24.656c-.44 3.04-.568 3.66-.594 19.188-.01 5.176.0 11.988.0 21.125.0 27.12.03 35.05.16 36.59.45 5.42 1.3 8.83 3.1 12.56 3.44 7.14 10.01 12.5 17.75 14.5 2.68.69 5.64 1.07 9.44 1.25 1.61.07 18.02.12 34.44.12 16.42.0 32.84-.02 34.41-.1 4.4-.207 6.955-.55 9.78-1.28 7.79-2.01 14.24-7.29 17.75-14.53 1.765-3.64 2.66-7.18 3.065-12.317.088-1.12.125-18.977.125-36.81.0-17.836-.04-35.66-.128-36.78-.41-5.22-1.305-8.73-3.127-12.44-1.495-3.037-3.155-5.305-5.565-7.624C116.9 4 111.64 1.5 105.372.596 102.335.157 101.73.027 86.19.0H65.03z" transform="translate(1.004 1)"/><path fill="url(#d)" d="M65.03.0C37.888.0 29.95.028 28.407.156c-5.57.463-9.036 1.34-12.812 3.22-2.91 1.445-5.205 3.12-7.47 5.468C4 13.126 1.5 18.394.595 24.656c-.44 3.04-.568 3.66-.594 19.188-.01 5.176.0 11.988.0 21.125.0 27.12.03 35.05.16 36.59.45 5.42 1.3 8.83 3.1 12.56 3.44 7.14 10.01 12.5 17.75 14.5 2.68.69 5.64 1.07 9.44 1.25 1.61.07 18.02.12 34.44.12 16.42.0 32.84-.02 34.41-.1 4.4-.207 6.955-.55 9.78-1.28 7.79-2.01 14.24-7.29 17.75-14.53 1.765-3.64 2.66-7.18 3.065-12.317.088-1.12.125-18.977.125-36.81.0-17.836-.04-35.66-.128-36.78-.41-5.22-1.305-8.73-3.127-12.44-1.495-3.037-3.155-5.305-5.565-7.624C116.9 4 111.64 1.5 105.372.596 102.335.157 101.73.027 86.19.0H65.03z" transform="translate(1.004 1)"/><path fill="#fff" d="M66.004 18c-13.036.0-14.672.057-19.792.29-5.11.234-8.598 1.043-11.65 2.23-3.157 1.226-5.835 2.866-8.503 5.535-2.67 2.668-4.31 5.346-5.54 8.502-1.19 3.053-2 6.542-2.23 11.65C18.06 51.327 18 52.964 18 66s.058 14.667.29 19.787c.235 5.11 1.044 8.598 2.23 11.65 1.227 3.157 2.867 5.835 5.536 8.503 2.667 2.67 5.345 4.314 8.5 5.54 3.054 1.187 6.543 1.996 11.652 2.23 5.12.233 6.755.29 19.79.29 13.037.0 14.668-.057 19.788-.29 5.11-.234 8.602-1.043 11.656-2.23 3.156-1.226 5.83-2.87 8.497-5.54 2.67-2.668 4.31-5.346 5.54-8.502 1.18-3.053 1.99-6.542 2.23-11.65.23-5.12.29-6.752.29-19.788s-.06-14.672-.29-19.792c-.24-5.11-1.05-8.598-2.23-11.65-1.23-3.157-2.87-5.835-5.54-8.503-2.67-2.67-5.34-4.31-8.5-5.535-3.06-1.187-6.55-1.996-11.66-2.23-5.12-.233-6.75-.29-19.79-.29zm-4.306 8.65c1.278-.002 2.704.0 4.306.0 12.816.0 14.335.046 19.396.276 4.68.214 7.22.996 8.912 1.653 2.24.87 3.837 1.91 5.516 3.59 1.68 1.68 2.72 3.28 3.592 5.52.657 1.69 1.44 4.23 1.653 8.91.23 5.06.28 6.58.28 19.39s-.05 14.33-.28 19.39c-.214 4.68-.996 7.22-1.653 8.91-.87 2.24-1.912 3.835-3.592 5.514-1.68 1.68-3.275 2.72-5.516 3.59-1.69.66-4.232 1.44-8.912 1.654-5.06.23-6.58.28-19.396.28-12.817.0-14.336-.05-19.396-.28-4.68-.216-7.22-.998-8.913-1.655-2.24-.87-3.84-1.91-5.52-3.59-1.68-1.68-2.72-3.276-3.592-5.517-.657-1.69-1.44-4.23-1.653-8.91-.23-5.06-.276-6.58-.276-19.398s.046-14.33.276-19.39c.214-4.68.996-7.22 1.653-8.912.87-2.24 1.912-3.84 3.592-5.52 1.68-1.68 3.28-2.72 5.52-3.592 1.692-.66 4.233-1.44 8.913-1.655 4.428-.2 6.144-.26 15.09-.27zm29.928 7.97c-3.18.0-5.76 2.577-5.76 5.758.0 3.18 2.58 5.76 5.76 5.76s5.76-2.58 5.76-5.76-2.58-5.76-5.76-5.76zm-25.622 6.73c-13.613.0-24.65 11.037-24.65 24.65s11.037 24.645 24.65 24.645S90.65 79.613 90.65 66 79.616 41.35 66.003 41.35zm0 8.65c8.836.0 16 7.163 16 16 0 8.836-7.164 16-16 16-8.837.0-16-7.164-16-16 0-8.837 7.163-16 16-16z"/></svg></a></nav></div></header><div class='body u-center'><style>code,pre{font-family:Consolas,Menlo,Monaco,source-code-pro,monospace;hyphens:none;line-height:1.5;overflow:auto;tab-size:2;text-align:left;white-space:pre;word-break:normal;word-spacing:normal;word-wrap:normal}pre{background:#282c34;border-radius:4px;color:#fff;margin:0;overflow:auto;padding:16px}code{font-size:14px}:not(pre)>code{background:rgba(0,0,0,6%);border-radius:2px;color:#1a1a1a;padding:2px 4px 1px;white-space:normal}.highlight,pre.highlight{border-radius:4px;max-width:800px;margin:48px auto}.highlight .ge{font-style:italic}.highlight .gs{font-weight:700}.highlight .ow{font-weight:700}.highlight .n,.highlight .nf,.highlight .nn,.highlight .o,.highlight .p{color:#abb2bf}.highlight .c,.highlight .c1,.highlight .cm,.highlight .cp,.highlight .cs{color:#969696;font-style:italic}.highlight .sr,.highlight .ss{color:#56b6c2}.highlight .k,.highlight .kc,.highlight .kd,.highlight .kn,.highlight .kp,.highlight .kr,.highlight .kt{color:#dc64ff}.highlight .l,.highlight .ld,.highlight .s,.highlight .s1,.highlight .s2,.highlight .sb,.highlight .sc,.highlight .sd,.highlight .se,.highlight .sh,.highlight .si,.highlight .sx{color:#8bdb51}.highlight .nt,.highlight .nx,.highlight .vi{color:#fb6666}.highlight .il,.highlight .m,.highlight .mf,.highlight .mh,.highlight .mi,.highlight .mo,.highlight .na{color:#e8e465}.highlight .bp,.highlight .nb,.highlight .nc,.highlight .nd,.highlight .ne,.highlight .ni,.highlight .nl,.highlight .no,.highlight .nv,.highlight .py,.highlight .vc,.highlight .vg{color:#e5c07b}.highlight .gd{color:#e05252}.highlight .gi{color:#43d08a}.highlight .w{color:#f8f8f2}.highlight .cpf{color:navy}.highlight .gu{color:#75715e}.highlight .lineno{color:#636d83;user-select:none}.highlight .ln{color:#636d83;user-select:none}.highlight .ln:after{content:" "}.highlight .hll,.highlight .hl{color:#abb2bf;background-color:#3a3f4b;display:block}.highlight .language-json .w+.s2{color:#e06c75}.highlight .language-json .kc{color:#56b6c2}.highlight{position:relative}.highlight .language-typescript::before{background:url(/images/tags/typescript.png);width:32px;height:32px;background-size:cover;content:'';border-radius:0;top:-12px}.highlight .language-css::before{background:url(/images/tags/css.png);width:32px;height:32px;background-size:cover;content:'';border-radius:0;top:-12px}.highlight .language-html::before{background:url(/images/tags/html.png);width:32px;height:32px;background-size:cover;content:'';border-radius:0;top:-12px}.highlight .language-javascript::before{background:url(/images/tags/javascript.png);width:32px;height:32px;background-size:cover;content:'';border-radius:0;top:-12px}.highlight .language-sh::before{background:url(/images/tags/terminal.png);width:32px;height:32px;background-size:cover;content:'';border-radius:0;top:-12px}.highlight .language-svelte::before{background:url(/images/tags/svelte.png);width:32px;height:32px;background-size:cover;content:'';border-radius:0;top:-12px}.highlight .language-jsx::before{background:url(/images/tags/react.png);width:36px;height:32px;background-size:cover;content:'';border-radius:0;top:6px}.highlight .language-fallback::before{display:none}.highlight code::before{background:#fff;border-radius:4px;color:rgba(0,0,0,.7);content:attr(data-lang);font-size:12px;padding:2px 8px;position:absolute;right:8px;text-transform:lowercase;top:-8px}.highlight .lntable{border-spacing:0;width:100%}</style><article id=article itemscope itemtype=http://schema.org/Article><div id=article-content-wrapper><div id=article-content><header id=article-header><picture><img decoding=async itemprop=image alt='Imagen de la etiqueta algolia' src=/images/tags/algolia.png width=48 height=48></picture><div class=article-header-meta><h1 itemprop=name>Cómo añadir un buscador en tu blog JamStack con Algolia</h1><div id=article-meta><time itemprop=datePublished datetime=2021-05-21T00:00:00Z>21 mayo 2021</time>
·
<span>12 minutos de lectura</span>
·
<a target=_blank rel="noopener nofollow" href=https://github.com/midudev/midu.dev/edit/master/content/posts/como-anadir-buscador-blog-jamstack-algolia.md>¿Una errata? Edita el artículo<svg viewBox="0 0 24 24"><path fill="currentcolor" d="M12 .297c-6.63.0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577.0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93.0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176.0.0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22.0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22.0 1.606-.015 2.896-.015 3.286.0.315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a></div></div></header><div itemprop=articleBody><div class=youtube-container style='max-width:650px;margin:0 auto;padding:16px 0 64px'><div class=youtube-iframe style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><lite-youtube videoid=zBTYBIUw1iw><div class=lty-playbtn></div></lite-youtube></div></div><p>Muchos lectores del blog me han pedido que añada un buscador. Al ser mi blog un JAMStack, había algunos retos. <strong>¿Cómo podía indexar todo el contenido que tengo en archivos estáticos?</strong> <strong>¿Cómo hago que ese índice esté actualizado a lo largo del tiempo?</strong> <strong>¿Cómo hago un ranking de esas búsquedas&mldr;?</strong></p><p>Una forma bastante sencilla, que da una solución general, sería tirar de <em>Google Custom Search</em>, que ya tiene todo mi contenido indexado. Sin embargo, tiene algunas <strong>desventajas</strong>: es rápido pero no lo suficiente, pierdo el control de la búsqueda y, además, no puedo evolucionarlo como me gustaría.</p><p>Después de informarme de mis opciones, al final he decidido tirar por Algolia, una compañía que se encarga de crear experiencias de búsqueda como servicio (SaaS) y que viene a solucionar mis problemas. Vamos a ver cómo podemos añadir la búsqueda en mi blog paso a paso.</p><div style=text-align:center><video loop style=width:90%;max-width:500px;height:auto autoplay src=https://cleanshot-cloud-fra.accelerator.net/media/6116/EUL02znNnMwBdnQlIxiO2gxxEMqI3fg6WYKb484K.mp4>
<em>El resultado final</em></div><h2 id=cómo-funciona-algolia>¿Cómo funciona Algolia?</h2><p>Algolia nos <strong>ofrece una API y widgets</strong> para montar nuestra búsqueda. Pero, antes, para poder ofrecernos esto <strong>tenemos que indexar nuestro contenido en su plataforma.</strong> Existen diferentes estrategias para lograr esto. En mi caso estoy usando Hugo y podría crear una plantilla que tuviese toda la información que necesito.</p><p>Para crear una <strong>solución lo más general posible</strong>, que pueda servir para cualquier blog que use un JAMStack, <strong>voy a usar el RSS para generar un archivo JSON</strong> y, este, que pase a formar parte del índice de Algolia.</p><p>Los pasos serán:</p><ul><li>Creamos la aplicación y el índice en Algolia.</li><li>Convertimos el RSS a un formato JSON.</li><li>Enviamos ese JSON al índice de Algolia usando su API.</li><li>Configuramos el índice en Algolia para mejorar las búsquedas.</li><li>Usamos los widgets y la API de Algolia para tener la búsqueda en el front end.</li></ul><p>¡Vamos a Algolia a crear nuestra app!</p><h2 id=creando-nuestra-aplicación-e-índice-en-algolia>Creando nuestra aplicación e índice en Algolia</h2><p>Primero, <a href=https://midu.dev/images/algolia-horizontal-logo.png>vamos a ir a Algolia para registranos</a>, si no lo estamos ya. Seguramente, si es la primera vez que entras, tendrás un tutorial que te indica cómo empezar paso a paso.</p><p>Lo primero es crear una aplicación. Aquí, además del nombre, indicaremos la capa de precios que queremos utilizar. En nuestro caso será la FREE, que te da 10 unidades gratis al mes y que trae lo suficiente para funcionar (más adelante os comentaré sobre los precios del servicio).</p><p>Al seguir tendremos que elegir el centro de datos mejor situado según nuestra ubicación. Ten en cuenta que Algolia te recomendará el mejor lugar según tu ubicación. <strong>Si tu página es servida en otra localización o país, tenlo en cuenta, y selecciona el centro de datos que mejor funcione para tu web.</strong></p><figure class=center><img alt='Selecciona tu centro de datos adecuado según tu ubicación' loading=lazy decoding=async src=/images/como-anadir-buscador-02.jpg><figcaption>Selecciona tu centro de datos adecuado según tu ubicación</figcaption></figure><p>Tras esto, tendremos que aceptar los términos y condiciones y, finalmente, podremos decidir si seguimos una guía paso a paso o si ya somos usuarios que han usado Algolia. En nuestro caso, <strong>vamos a decir que somos usuarios con experiencia y nos basaremos en este artículo con los siguientes pasos.</strong></p><h2 id=creando-el-índice-en-algolia>Creando el índice en Algolia</h2><p>Pulsamos en <code>Create Index</code> si nos aparece en la pantalla o vamos al menú de <code>Indices</code> y, al hacer click, nos indicará de crear uno.</p><p>Nos pide un nombre. En este punto es interesante utilizar diferentes índices dependiendo del entorno (dev, prod, test&mldr;). En nuestro caso vamos a ir directamente a usar el de producción. <code>prod_blog_content</code>.</p><p>Ahora tendremos que importar la información que tiene que ser indexada. Podríamos añadir los elementos subiendo un archivo JSON con nuestros elementos, podríamos añadirlos a mano (nooooooo) y, lo que haremos, <strong>se puede utilizar la API para automatizar este proceso.</strong></p><p>Ahora nos faltaría recuperar</p><h2 id=generando-el-contenido-para-enviarlo-al-índice-de-algolia>Generando el contenido para enviarlo al índice de Algolia</h2><p>Teniendo en cuenta que ya estoy creando un RSS para mi blog, puedo leer ese mismo contenido para generar el JSON que necesitamos. Para ello vamos a usar el paquete <code>xml2json</code> por lo que tendremos que instalarlo como dependencia en nuestro proyecto (<code>npm install xml2json</code>).</p><p>Vamos a recuperar el archivo <code>index.xml</code> (que es el RSS) y lo transformamos a JSON.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>fs</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;fs&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>path</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;path&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>// usamos el paquete `xml2json` para transformar el RSS a un JSON
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>parser</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;xml2json&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// leemos con Node el RSS de nuestro blog
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>rss</span> <span class=o>=</span> <span class=nx>fs</span><span class=p>.</span><span class=nx>readFileSync</span><span class=p>(</span><span class=nx>path</span><span class=p>.</span><span class=nx>resolve</span><span class=p>(</span><span class=nx>__dirname</span><span class=p>,</span> <span class=s1>&#39;../public/index.xml&#39;</span><span class=p>),</span> <span class=s1>&#39;utf-8&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>// pasamos la opción object: true para que nos devuelva un objeto de JavaScript
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>json</span> <span class=o>=</span> <span class=nx>parser</span><span class=p>.</span><span class=nx>toJson</span><span class=p>(</span><span class=nx>rss</span><span class=p>,</span> <span class=p>{</span><span class=nx>object</span><span class=o>:</span> <span class=kc>true</span><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=c1>// en item vamos a tener un array de elementos con todos los artículos
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>json</span><span class=p>.</span><span class=nx>rss</span><span class=p>.</span><span class=nx>channel</span><span class=p>.</span><span class=nx>item</span><span class=p>)</span>
</span></span></code></pre></div><p>Con esto ya tendríamos todo nuestro contenido del blog preparado para ser indexado. Si no tienes un archivo RSS generado, tendrás que pensar en una alternativa para ser capaz de exporar todo el contenido aunque, desde luego, te recomiendo que siempre generes un archivo RSS.</p><h2 id=enviando-el-contenido-al-índice-de-algolia>Enviando el contenido al índice de Algolia</h2><p>Una vez que ya tenemos el contenido, sólo nos faltará enviarlo a Algolia. Para ello <strong>necesitamos antes sacar las API Keys.</strong> Para ello, volvemos a la aplicación de <strong>Algolia</strong> y en el menú principal buscamos la sección &ldquo;API Keys&rdquo;. Allí necesitaremos recuperar dos IDs: el <strong>Application ID</strong> y el <strong>Admin API Key</strong>. También necesitamos recordar el nombre del índice que creamos antes.</p><p>Una vez tengamos eso, necesitamos instalar primero la dependencia de <code>algoliasearch</code>. Lo haremos con <code>npm install algoliasearch</code>. Y ahora pasamos al código.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>algoliasearch</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;algoliasearch&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>ALGOLIA_APPLICATION_ID</span> <span class=o>=</span> <span class=s2>&#34;N06USNNE94&#34;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>ALGOLIA_ADMIN_API_KEY</span> <span class=o>=</span> <span class=s2>&#34;ffb74847ebfbabfbfbf66cb59c4673ba&#34;</span> <span class=c1>// es inventado :P
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>ALGOLIA_INDEX_NAME</span> <span class=o>=</span> <span class=s2>&#34;prod_blog_content&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>client</span> <span class=o>=</span> <span class=nx>algoliasearch</span><span class=p>(</span><span class=nx>ALGOLIA_APPLICATION_ID</span><span class=p>,</span> <span class=nx>ALGOLIA_ADMIN_API_KEY</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>index</span> <span class=o>=</span> <span class=nx>client</span><span class=p>.</span><span class=nx>initIndex</span><span class=p>(</span><span class=nx>ALGOLIA_INDEX_NAME</span><span class=p>)</span>
</span></span></code></pre></div><p>Las constantes de <code>ALGOLIA_</code>, seguramente, sería <strong>mejor sacarlos de variables de entorno.</strong> Pero en este caso, por sencillez, los vamos a dejar así.</p><p>Lo interesante del índice de Algolia es que no necesita un contrato en concreto pero sería interesante hacer que nuestros posts siempre tengan una id única. Para ello podemos usar la propiedad <code>ObjectId</code> que Algolia define como un identificador único para nuestro post. En nuestro caso vamos a usar el atributo <code>guid</code> que ya está disponible.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>posts</span> <span class=o>=</span> <span class=nx>json</span><span class=p>.</span><span class=nx>rss</span><span class=p>.</span><span class=nx>channel</span><span class=p>.</span><span class=nx>item</span><span class=p>.</span><span class=nx>map</span><span class=p>(</span><span class=nx>post</span> <span class=p>=&gt;</span> <span class=p>({...</span><span class=nx>post</span><span class=p>,</span> <span class=nx>objectID</span><span class=o>:</span> <span class=nx>post</span><span class=p>.</span><span class=nx>guid</span> <span class=p>}))</span>
</span></span></code></pre></div><blockquote><p>Es importante ofrecer un objectID que siempre sea el mismo para evitar que el mismo post se añada dos veces en el índice con identificadores distintos. No es importante que sea un número, auto-generado o lo que sea. Pero siempre tiene que ser el mismo y debe ser único que identifique a ese post.</p></blockquote><p>Con esto ya habremos iniciado el índice, preparado para recibir los posts para ser indexados. Así que ya podemos llamar la API para enviar todos estos posts al índice de Algolia.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>index</span><span class=p>.</span><span class=nx>saveObjects</span><span class=p>(</span><span class=nx>posts</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=nx>objectIds</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>({</span><span class=nx>objectIds</span><span class=p>})</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=k>catch</span><span class=p>(</span><span class=nx>err</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span></code></pre></div><p>El código completo quedaría así:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>parser</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;xml2json&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>fs</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;fs&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>path</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;path&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>algoliasearch</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;algoliasearch&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>ALGOLIA_APPLICATION_ID</span> <span class=o>=</span> <span class=s2>&#34;N06USNNE94&#34;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>ALGOLIA_ADMIN_API_KEY</span> <span class=o>=</span> <span class=s2>&#34;9089a9d591b8c82c89e2a810f4c77fa1&#34;</span> <span class=c1>// es inventado :P
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>ALGOLIA_INDEX_NAME</span> <span class=o>=</span> <span class=s2>&#34;prod_blog_content&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>rss</span> <span class=o>=</span> <span class=nx>fs</span><span class=p>.</span><span class=nx>readFileSync</span><span class=p>(</span><span class=nx>path</span><span class=p>.</span><span class=nx>resolve</span><span class=p>(</span><span class=nx>__dirname</span><span class=p>,</span> <span class=s1>&#39;../public/index.xml&#39;</span><span class=p>),</span> <span class=s1>&#39;utf-8&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>json</span> <span class=o>=</span> <span class=nx>parser</span><span class=p>.</span><span class=nx>toJson</span><span class=p>(</span><span class=nx>rss</span><span class=p>,</span> <span class=p>{</span><span class=nx>object</span><span class=o>:</span> <span class=kc>true</span><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>client</span> <span class=o>=</span> <span class=nx>algoliasearch</span><span class=p>(</span><span class=nx>ALGOLIA_APPLICATION_ID</span><span class=p>,</span> <span class=nx>ALGOLIA_ADMIN_API_KEY</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>index</span> <span class=o>=</span> <span class=nx>client</span><span class=p>.</span><span class=nx>initIndex</span><span class=p>(</span><span class=nx>ALGOLIA_INDEX_NAME</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>posts</span> <span class=o>=</span> <span class=nx>json</span><span class=p>.</span><span class=nx>rss</span><span class=p>.</span><span class=nx>channel</span><span class=p>.</span><span class=nx>item</span><span class=p>.</span><span class=nx>map</span><span class=p>(</span><span class=nx>post</span> <span class=p>=&gt;</span> <span class=p>({...</span><span class=nx>post</span><span class=p>,</span> <span class=nx>objectID</span><span class=o>:</span> <span class=nx>post</span><span class=p>.</span><span class=nx>guid</span> <span class=p>}))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>index</span><span class=p>.</span><span class=nx>saveObjects</span><span class=p>(</span><span class=nx>posts</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=nx>objectIds</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>({</span><span class=nx>objectIds</span><span class=p>})</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=k>catch</span><span class=p>(</span><span class=nx>err</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span></code></pre></div><p>Al ejecutar el código nos debería aparecer algo así:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>{
</span></span><span class=line><span class=cl>  objectIds: {
</span></span><span class=line><span class=cl>    taskIDs: [ 10798010001 ],
</span></span><span class=line><span class=cl>    objectIDs: [
</span></span><span class=line><span class=cl>      &#39;https://midu.dev/como-crear-un-spinner-con-css/&#39;,
</span></span><span class=line><span class=cl>      &#39;https://midu.dev/podcast/03_04_como-no-hacer-un-live-coding-challenge-de-mierda/&#39;,
</span></span><span class=line><span class=cl>      &#39;https://midu.dev/como-arreglar-error-react-has-detected-change-order-hooks/&#39;,
</span></span><span class=line><span class=cl>      &#39;https://midu.dev/como-arreglar-no-xcode-or-clt-version-detected-npm-install/&#39;,
</span></span><span class=line><span class=cl>      &#39;https://midu.dev/no-sirvo-para-programar-no-es-para-todos-vales-como-programador/&#39;,
</span></span><span class=line><span class=cl>    ...
</span></span><span class=line><span class=cl>  }
</span></span></code></pre></div><p>Eso significa que todo ha ido bien. Y, para comprobarlo, podemos ir a nuestra página de Algolia y ver si nuestro contenido ha sido indexado correctamente.</p><figure class=center><img alt='Al volver al índice de Algolia ya podemos ver que está nuestro contenido con diferentes atributos' loading=lazy decoding=async src=/images/como-anadir-buscador-03.jpg><figcaption>Al volver al índice de Algolia ya podemos ver que está nuestro contenido con diferentes atributos</figcaption></figure><h2 id=configurando-nuestra-búsqueda-en-algolia>Configurando nuestra búsqueda en Algolia</h2><p>Tenemos el contenido pero todavía le tenemos que decir a Algolia cómo funciona nuestra búsqueda. Para ello tenemos que a nuestro índice y dirigirnos a la sección de Configuración.</p><h3 id=cambiando-los-atributos-que-se-usan-en-la-búsqueda>Cambiando los atributos que se usan en la búsqueda</h3><p>Primero vamos a decirle qué atributos del contenido se usan en la búsqueda. En nuestro caso estamos enviando el <code>title</code>, <code>description</code>, <code>date</code>, <code>link</code> y <code>objectID</code>. Vamos a indicar que queremos que se pueda buscar sobre los dos primeros. Además, tenemos que indicar el orden de importancia de cada uno.</p><p>En nuestro caso el título es más importante que la descripción, por lo que vamos a añadir el <code>title</code> por encima del <code>description</code>. Además, vamos a hacer que estos atributos sean <em>ordered</em>. Esto significa que si la palabra buscada está más al principio de la frase, tendrá una importancia mayor. Por ejemplo si buscas <em>&ldquo;React&rdquo;</em> el título <em>&ldquo;React desde cero&rdquo;</em> será más importante que <em>&ldquo;Cómo mejorar en React&rdquo;</em>, ya que la palabra está al final de la frase. Esto lo podéis ir personalizando a vuestro gusto.</p><p>No olvides darle a <em>Review and Save Settings</em> antes de salir de la página.</p><figure class=center><img alt="Hemos configurado que los atributos 'buscables'  sean el título y la descripción. Además el título es más importante y en ambos vamos a tener en cuenta el orden de la palabra que se busca" loading=lazy decoding=async src=/images/como-anadir-buscador-04.jpg><figcaption>Hemos configurado que los atributos 'buscables' sean el título y la descripción. Además el título es más importante y en ambos vamos a tener en cuenta el orden de la palabra que se busca</figcaption></figure><p>Si quieres probar cómo funciona la búsqueda, puedes volver a la pestaña <em>Browse</em> y allí hacer una búsqueda para ver los resultados que devuelve y qué campos ha usado.</p><h2 id=construyendo-el-front-end-de-nuestro-buscador-con-algolia>Construyendo el front end de nuestro buscador con Algolia</h2><p>En nuestro <code>index.html</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>  <span class=c>&lt;!-- Motor de búsqueda de algolia --&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://cdn.jsdelivr.net/npm/algoliasearch@4.5.1/dist/algoliasearch-lite.umd.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- Widget para añadir un Instant Search en nuestro blog fácilmente --&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://cdn.jsdelivr.net/npm/instantsearch.js@4.8.3/dist/instantsearch.production.min.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- Estilos por defecto para el Instant Search --&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>link</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#34;stylesheet&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;https://cdn.jsdelivr.net/npm/instantsearch.css@7.4.5/themes/satellite-min.css&#34;</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>Una vez que tenemos todos los recursos cargados, vamos a añadir el HTML necesario en nuestro blog. Lo colocaremos donde queramos que aparezca nuestra búsqueda y sus resultados:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#39;searchbox&#39;</span><span class=p>&gt;&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#39;hits&#39;</span><span class=p>&gt;&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>Ya podemos empezar a escribir nuestro JavaScript para inicializar la búsqueda. Te dejo por aquí paso a paso lo que hay que hacer para añadir nuestro buscador de Algolia a nuestro blog.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// Vamos a &#34;API Keys&#34; y recuperamos el Application ID y el Search-Only API Key
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>var</span> <span class=nx>ALGOLIA_APPLICATION_ID</span> <span class=o>=</span> <span class=s1>&#39;QK9VV9YO5F&#39;</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>ALGOLIA_SEARCH_ONLY_API_KEY</span> <span class=o>=</span> <span class=s1>&#39;247bb355c786b6e9f528bc382cab3039&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Las usamos para inicializar el cliente de Algolia
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>var</span> <span class=nx>algoliaClient</span> <span class=o>=</span> <span class=nx>algoliasearch</span><span class=p>(</span><span class=nx>ALGOLIA_APPLICATION_ID</span><span class=p>,</span> <span class=nx>ALGOLIA_SEARCH_ONLY_API_KEY</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Inicializamos el módulo de instantsearch
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>var</span> <span class=nx>search</span> <span class=o>=</span> <span class=nx>instantsearch</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>indexName</span><span class=o>:</span> <span class=s1>&#39;prod_blog_content&#39;</span><span class=p>,</span> <span class=c1>// este es el nombre de tu índice, pon el correcto
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>numberLocale</span><span class=o>:</span> <span class=s1>&#39;es&#39;</span><span class=p>,</span> <span class=c1>// idioma para el buscador
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>searchClient</span><span class=o>:</span> <span class=nx>algoliaClient</span> <span class=c1>// el cliente que hemos iniciado antes
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Le indicamos los widgets que vamos a usar
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>search</span><span class=p>.</span><span class=nx>addWidgets</span><span class=p>([</span>
</span></span><span class=line><span class=cl>  <span class=c1>// en el elemento con id &#39;searchbox&#39; iniciamos el buscador
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>instantsearch</span><span class=p>.</span><span class=nx>widgets</span><span class=p>.</span><span class=nx>searchBox</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>container</span><span class=o>:</span> <span class=s1>&#39;#searchbox&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>placeholder</span><span class=o>:</span> <span class=s1>&#39;Buscar...&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>}),</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// los resultados irán en el elemento con id &#39;hits&#39;
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>instantsearch</span><span class=p>.</span><span class=nx>widgets</span><span class=p>.</span><span class=nx>hits</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>container</span><span class=o>:</span> <span class=s1>&#39;#hits&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>}),</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// configuramos que sólo salgan tres resultados
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>instantsearch</span><span class=p>.</span><span class=nx>widgets</span><span class=p>.</span><span class=nx>configure</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>hitsPerPage</span><span class=o>:</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl>  <span class=p>}),</span>
</span></span><span class=line><span class=cl><span class=p>]);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>search</span><span class=p>.</span><span class=nx>start</span><span class=p>()</span>
</span></span></code></pre></div><p>Si has llegado hasta aquí&mldr; verás que todo funcionar funciona&mldr; pero al entrar en nuestro blog, aparece el buscador ya con resultados y además el cómo se muestran no es lo más adecuado (se ve el objeto JSON ahí horrible, directamente :D). Si haces una búsqueda veás que sí funciona pero nos quedaría mejorar los dos puntos mencionados.</p><h3 id=mejorar-la-ui-de-los-resultados>Mejorar la UI de los resultados</h3><p>Para mejorar los resultados vamos a usar una plantilla customizada. Para ello cada widget recibe una propiedad <code>templates</code> que te permite cambiar el renderizado por defecto de cada uno.</p><p>El sistema de plantillas que usa es <a href=https://mustache.github.io/>mustache</a> y podremos referirnos a propiedades que tengamos en el post indexado. Incluye una función llamada <code>helpers.highlight</code> que te permite resaltar si la búsqueda se encuentra en el texto que intentas renderizar.</p><p>Quedaría de esta forma:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>instantsearch</span><span class=p>.</span><span class=nx>widgets</span><span class=p>.</span><span class=nx>hits</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>container</span><span class=o>:</span> <span class=s1>&#39;#hits&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>templates</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>empty</span><span class=o>:</span> <span class=s1>&#39;Sin resultados&#39;</span><span class=p>,</span> <span class=c1>// para cuando no hay resultados
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// para renderizar cada resultado
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>item</span><span class=o>:</span> <span class=sb>`&lt;a href=&#39;{{ link }}&#39;&gt;
</span></span></span><span class=line><span class=cl><span class=sb>      {{#helpers.highlight}}{ &#34;attribute&#34;: &#34;title&#34; }{{/helpers.highlight}}
</span></span></span><span class=line><span class=cl><span class=sb>      &lt;div&gt;
</span></span></span><span class=line><span class=cl><span class=sb>        &lt;small&gt;{{#helpers.highlight}}{ &#34;attribute&#34;: &#34;description&#34; }{{/helpers.highlight}}&lt;/small&gt;
</span></span></span><span class=line><span class=cl><span class=sb>      &lt;/div&gt;
</span></span></span><span class=line><span class=cl><span class=sb>    &lt;/a&gt;`</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>}),</span>
</span></span></code></pre></div><figure class=center><img alt='Nuestro buscador va tomando forma' loading=lazy decoding=async src=/images/como-anadir-buscador-05.jpg><figcaption>Nuestro buscador va tomando forma</figcaption></figure><h3 id=evitar-la-primera-búsqueda>Evitar la primera búsqueda</h3><p>Ahora que visualmente ya queda bastante bien, todavía tenemos que solucionar un problemilla y es que cuando entramos en la página el buscador ya muestra resultados pese a que todavía no lo estamos usando.</p><p>Sorprendentemente no existeu una opción que fácilmente nos permita esto y me imagino que tiene que ver con el hecho que este módulo de <code>instantSearch</code> está pensando más bien para páginas de búsqueda que siempre tienen resultados.</p><p>Igualmente sabemos de programación, así que vamos a conseguir emular el mismo comportamiento que deseamos. Para ello vamos a hacer lo siguiente:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// creamos una variable y la iniciamos a true
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>var</span> <span class=nx>algoliaClient</span> <span class=o>=</span> <span class=nx>algoliasearch</span><span class=p>(</span><span class=nx>ALGOLIA_APPLICATION_ID</span><span class=p>,</span> <span class=nx>ALGOLIA_SEARCH_ONLY_API_KEY</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// creamos un searchClient partiendo del algoliaClient
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>var</span> <span class=nx>searchClient</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=p>...</span><span class=nx>algoliaClient</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>search</span><span class=p>(</span><span class=nx>requests</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// esta opción del searchClient es la que se ejecuta cuando
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// se hace una búsqueda. Comprobamos antes si es la primera
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// carga para evitar que haga la búsqueda
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>if</span> <span class=p>(</span><span class=nx>firstLoad</span> <span class=o>===</span> <span class=kc>true</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>firstLoad</span> <span class=o>=</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=c1>// return sin hacer nada
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>algoliaClient</span><span class=p>.</span><span class=nx>search</span><span class=p>(</span><span class=nx>requests</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>search</span> <span class=o>=</span> <span class=nx>instantsearch</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>indexName</span><span class=o>:</span> <span class=s1>&#39;prod_blog_content&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>numberLocale</span><span class=o>:</span> <span class=s1>&#39;es&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>searchClient</span> <span class=c1>// el cliente que tiene el cambio de la config
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>});</span>
</span></span></code></pre></div><p>Con esto hemos conseguido nuestro objetivo y ahora el buscador no funcionará de primeras, si no que esperará a que lo usemos para mostrar los resultados.</p><p>Este sería el resultado final:</p><div style=text-align:center><video loop style=width:60%;height:auto autoplay src=https://cleanshot-cloud-fra.accelerator.net/media/6116/EUL02znNnMwBdnQlIxiO2gxxEMqI3fg6WYKb484K.mp4></div><h2 id=precio-de-algolia>Precio de Algolia</h2><p>Seguramente ahora te estarás preguntando por cuánto te va a salir esto. Lo cierto es que para proyectos pequeños es muy posible que no tengas que pagar nada&mldr; <strong>Tienes disponibles hasta 10.000 búsquedas al mes y 10.000 elementos a indexar de forma totalmente gratis</strong>. En el caso que necesites más, puedes pagar conforme vayas necesitando más. 1000 búsquedas y 1000 elementos más te saldrá por 1$ al mes.</p><figure class=center><img alt='Los precios de Algolia' loading=lazy decoding=async src=/images/como-anadir-buscador-01.jpg><figcaption>Los precios de Algolia</figcaption></figure><p>Si además tu proyecto es de código abierto, <a href=https://www.algolia.com/for-open-source/>puedes optar a una licencia especial de forma totalmente gratuita</a> valorada en 180$ al mes (200.000 elementos a indexar y 200.000 búsquedas al mes). No está nada mal.</p><h2 id=conclusiones-usando-algolia-para-mi-búsqueda>Conclusiones usando Algolia para mi búsqueda</h2><p>Creo que todavía puedo mejorar bastante la búsqueda y de hecho tengo algunas ideas. Para empezar, explorando la biblioteca de Autocomplete de la misma Algolia que es más liviana que InstantSearch y que ofrece más personalización.</p><p>También quiero mejorar, no sólo el diseño, pero cómo se cargan los scripts. De forma que <strong>sólo se carguen los scripts de Algolia</strong> cuando realmente sean necesarios.</p><p>Pero por ahora, teniendo en cuenta que hasta hace pocas semanas no sabía absolutamente nada de este servicio, estoy bastante contento cómo ha funcionado y lo que he logrado con un par de horas de trabajo</p><p>Si te interesa darle una oportunidad, puedes <a href=https://utm.io/udih1>usar mi código</a> (si usas el producto, me llevo una pequeña comisión):
<a href=https://utm.io/udih1>Registrarse en Algolia</a></p><p>Y si no, ¡sigue atento a mi blog porque seguro que seguiré contando cómo va evolucionado la cosa! ¡Gracias por leerme!</p></div><div id=article-pagination><a class=prev href=https://midu.dev/deja-de-usar-imports-relativos-next-js/><img decoding=async alt=nextjs loading=lazy src=/images/tags/nextjs.png width=64 height=64>
Cómo usar rutas absolutas en los imports en Next.js</a>
<a class=next href=https://midu.dev/como-cargar-archivos-json-esmodules-node-js/><img decoding=async alt=node loading=lazy src=/images/tags/node.png width=64 height=64>
Cómo cargar archivos JSON con ESModules en Node.js</a></div></div></div></article><style>#TableOfContents-container{display:none;z-index:2}@media(min-width:1300px){#TableOfContents-container{display:block;position:fixed;right:32px}#TableOfContents-container h3{font-size:14px;padding-bottom:8px}#TableOfContents ul{list-style:none;padding-left:0;padding-bottom:0;max-width:200px;line-height:1.2}#TableOfContents ul li{margin-bottom:8px}#TableOfContents ul li.active a{background-color:#d0edff}#TableOfContents ul ul{list-style:none;color:#444;padding-left:8px;margin-top:8px}#TableOfContents ul ul li:before{content:'-';padding-right:4px}#TableOfContents a{color:#555;display:inline;font-weight:500;font-size:12px;line-height:1}#TableOfContents a code{font-size:12px}#TableOfContents a:hover{background-color:#d0edff}#TableOfContents ul ul a{color:#777}div.highlight button{color:#adb5bd;box-sizing:border-box;transition:.2s ease-out;cursor:pointer;user-select:none;background:rgba(0,0,0,.15);border:1px solid transparent;padding:5px 10px;font-size:.8em;position:absolute;bottom:0;right:0;border-radius:0 .15rem}}</style><div id=TableOfContents-container><h3>Contenido del artículo</h3><nav id=TableOfContents><ul><li><a href=#cómo-funciona-algolia>¿Cómo funciona Algolia?</a></li><li><a href=#creando-nuestra-aplicación-e-índice-en-algolia>Creando nuestra aplicación e índice en Algolia</a></li><li><a href=#creando-el-índice-en-algolia>Creando el índice en Algolia</a></li><li><a href=#generando-el-contenido-para-enviarlo-al-índice-de-algolia>Generando el contenido para enviarlo al índice de Algolia</a></li><li><a href=#enviando-el-contenido-al-índice-de-algolia>Enviando el contenido al índice de Algolia</a></li><li><a href=#configurando-nuestra-búsqueda-en-algolia>Configurando nuestra búsqueda en Algolia</a><ul><li><a href=#cambiando-los-atributos-que-se-usan-en-la-búsqueda>Cambiando los atributos que se usan en la búsqueda</a></li></ul></li><li><a href=#construyendo-el-front-end-de-nuestro-buscador-con-algolia>Construyendo el front end de nuestro buscador con Algolia</a><ul><li><a href=#mejorar-la-ui-de-los-resultados>Mejorar la UI de los resultados</a></li><li><a href=#evitar-la-primera-búsqueda>Evitar la primera búsqueda</a></li></ul></li><li><a href=#precio-de-algolia>Precio de Algolia</a></li><li><a href=#conclusiones-usando-algolia-para-mi-búsqueda>Conclusiones usando Algolia para mi búsqueda</a></li></ul></nav></div><style>#share{bottom:16px;left:0;display:flex;position:fixed;right:0;width:100%;justify-content:center;z-index:1}#share a{background:#fff;border-radius:32px;bottom:0;box-shadow:rgba(100,110,140,.4)0 6px 21px 2px;color:#333;display:flex;font-size:14px;font-weight:500;margin:0 16px;padding:8px 16px;text-align:center;align-self:center;align-items:center}#share a:hover{background:#dcf1ff}#share svg{align-self:center;display:inline-flex;margin-left:4px}</style><div id=share><a target=_blank rel='nofollow noopener' href='https://twitter.com/share?url=https%3a%2f%2fmidu.dev%2fcomo-anadir-buscador-blog-jamstack-algolia%2f&text="C%c3%b3mo%20a%c3%b1adir%20un%20buscador%20en%20tu%20blog%20JamStack%20con%20Algolia" por @midudev'><span>Comparte el artículo</span><svg viewBox="0 0 612 612" width="24"><path d="M612 116.258a250.714 250.714.0 01-72.088 19.772c25.929-15.527 45.777-40.155 55.184-69.411-24.322 14.379-51.169 24.82-79.775 30.48-22.907-24.437-55.49-39.658-91.63-39.658-69.334.0-125.551 56.217-125.551 125.513.0 9.828 1.109 19.427 3.251 28.606-104.326-5.24-196.835-55.223-258.75-131.174-10.823 18.51-16.98 40.078-16.98 63.101.0 43.559 22.181 81.993 55.835 104.479A125.556 125.556.0 0124.629 232.21v1.568c0 60.806 43.291 111.554 100.693 123.104-10.517 2.83-21.607 4.398-33.08 4.398-8.107.0-15.947-.803-23.634-2.333 15.985 49.907 62.336 86.199 117.253 87.194-42.947 33.654-97.099 53.655-155.916 53.655-10.134.0-20.116-.612-29.944-1.721 55.567 35.681 121.536 56.485 192.438 56.485 230.948.0 357.188-191.291 357.188-357.188l-.421-16.253c24.666-17.593 46.005-39.697 62.794-64.861z" fill="#1da1f2"/></svg></a></div><script>document.addEventListener("DOMContentLoaded",function(){const t=e=>{const t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t);const n=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);t.select(),document.execCommand("copy"),document.body.removeChild(t),n&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(n))};function n(e,n){const{children:s}=e.target.parentElement,{innerText:o}=Array.from(s)[0];t(o),n.innerHTML="✅ Copied!",setTimeout(()=>{n.innerHTML="Copy"},[1e3])}const e=()=>{const e=document.querySelectorAll("div.highlight");e.forEach(e=>{const s=e.querySelector("button.copy-button");if(s)return;const t=document.createElement("button");t.innerHTML="Copy",t.className="copy-button",t.addEventListener("click",function(e){n(e,t)}),e.append(t)})};e();const s=new MutationObserver(()=>{e()}),o=document.querySelector("body"),i={childList:!0,subtree:!0};s.observe(o,i)})</script></div><footer><section class=u-center><a href=mailto:miduga@gmail.com rel="noopener nofollow" aria-label=Contact>Contacto</a>
<a href=/index.xml target=_blank rel="noopener nofollow" aria-label='Suscríbete al feed RSS'>RSS</a>
<a href=https://twitch.tv/midudev target=_blank rel="noopener nofollow" aria-label='Twitch de @midudev'>Twitch</a>
<a href=https://github.com/midudev target=_blank rel="noopener nofollow" aria-label='Github de @midudev'>GitHub</a>
<a href=https://youtube.com/midudev target=_blank rel="noopener nofollow" aria-label='Canal de Youtube de @midudev'>YouTube</a>
<a href=https://twitter.com/midudev target=_blank rel="noopener nofollow" aria-label='Twitter de @midudev'>Twitter</a>
<a href=https://www.instagram.com/midu.dev/ target=_blank rel="noopener nofollow" aria-label='Instagram de midudev'>Instagram</a>
<a href=/newsletter/ aria-label='Newsletter de @midudev'>Newsletter</a></section><img class=footer-emote src=/images/midudev-this-is-fine.png lazy=loading decoding=async width=36 alt="This is fine Midudev logo">
<img decoding=async loading=eager fetchpriority=low src=https://librecounter.org/counter.svg referrerpolicy=unsafe-url style=width:1px;height:1px></footer><script>const $=e=>document.querySelector(e),$$=e=>document.querySelectorAll(e),loadedScripts=[];function loadScript(e){return loadedScripts.includes(e)?Promise.resolve():new Promise(function(t,n){const s=document.createElement("script");let o=!1;s.type="text/javascript",s.src=e,s.async=!0,s.onerror=function(e){n(e,s)},s.onload=s.onreadystatechange=function(){!o&&(!this.readyState||this.readyState==="complete")&&(o=!0,loadedScripts.push(e),t())};const i=document.getElementsByTagName("script")[0];i.parentElement.insertBefore(s,i)})}function createYoutubeFrame(e){const t="<div id='lightbox'><a href='#'><svg width='48' height='48' viewBox='0 0 24 24' fill='none' stroke='#fff' stroke-width='1' stroke-linecap='square' stroke-linejoin='arcs'><line x1='18' y1='6' x2='6' y2='18'></line><line x1='6' y1='6' x2='18' y2='18'></line></svg></a> <section> <div> <iframe src='https://www.youtube.com/embed/"+e+"?autoplay=1' width='560' height='315' frameborder='0' allow='accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture' allowfullscreen></iframe></div></section></div>",n=document.createRange().createContextualFragment(t);document.body.appendChild(n),$("#lightbox a").addEventListener("click",function(e){e.preventDefault();const t=$("#lightbox");t.parentNode.removeChild(t)},{once:!0})}function initScheme(){const t=window.matchMedia("(prefers-color-scheme: dark)").matches;let e=t?"dark-mode":"light-mode";localStorage.getItem("scheme")&&(e=localStorage.getItem("scheme")),document.documentElement.setAttribute("scheme",e)}initScheme(),$("#emoticon-mode").addEventListener("click",function(){const t=document.documentElement.getAttribute("scheme"),e=t==="light-mode";document.documentElement.setAttribute("scheme",e?"dark-mode":"light-mode"),localStorage.setItem("scheme",e?"dark-mode":"light-mode")}),$$(".youtube-link").forEach(function(e){e.addEventListener("click",function(e){e.preventDefault();const t=this.getAttribute("data-id");createYoutubeFrame(t)})});class LiteYTEmbed extends window.HTMLElement{async connectedCallback(){this.videoId=this.getAttribute("videoid");let e=this.querySelector(".lty-playbtn");this.playLabel=e&&e.textContent.trim()||this.getAttribute("playlabel")||"Play";const t=await LiteYTEmbed.checkWebPSupport();if(this.posterUrl=t?`https://i.ytimg.com/vi_webp/${this.videoId}/hqdefault.webp`:`https://i.ytimg.com/vi/${this.videoId}/hqdefault.jpg`,LiteYTEmbed.addPrefetch("preload",this.posterUrl,"image"),this.style.backgroundImage=`url("${this.posterUrl}")`,e||(e=document.createElement("button"),e.type="button",e.classList.add("lty-playbtn"),this.append(e)),!e.textContent){const t=document.createElement("span");t.className="lyt-visually-hidden",t.textContent=this.playLabel,e.append(t)}this.addEventListener("pointerover",LiteYTEmbed.warmConnections,{once:!0}),this.addEventListener("click",e=>this.addIframe())}static addPrefetch(e,t,n){const s=document.createElement("link");s.rel=e,s.href=t,n&&(s.as=n),document.head.append(s)}static checkWebPSupport(){return typeof LiteYTEmbed.hasWebPSupport!="undefined"?Promise.resolve(LiteYTEmbed.hasWebPSupport):new Promise(e=>{const n=t=>{LiteYTEmbed.hasWebPSupport=t,e(t)},t=new window.Image;t.onload=()=>n(!0),t.onerror=()=>n(!1),t.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="})}static warmConnections(){if(LiteYTEmbed.preconnected)return;LiteYTEmbed.addPrefetch("preconnect","https://www.youtube-nocookie.com"),LiteYTEmbed.addPrefetch("preconnect","https://www.google.com"),LiteYTEmbed.addPrefetch("preconnect","https://googleads.g.doubleclick.net"),LiteYTEmbed.addPrefetch("preconnect","https://static.doubleclick.net"),LiteYTEmbed.preconnected=!0}addIframe(){const t=new URLSearchParams(this.getAttribute("params")||[]);t.append("autoplay","1");const e=document.createElement("iframe");e.width=560,e.height=315,e.title=this.playLabel,e.allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",e.allowFullscreen=!0,e.src=`https://www.youtube-nocookie.com/embed/${encodeURIComponent(this.videoId)}?${t.toString()}`,this.append(e),this.classList.add("lyt-activated"),this.querySelector("iframe").focus()}}window.customElements.define("lite-youtube",LiteYTEmbed);const intersectionObserverOptions={rootMargin:"0px",threshold:1},$share=document.getElementById("share");if($share){const e=document.getElementById("article-pagination"),t=$("footer"),n=e||t,s=function(e){const[t]=e,n=t.boundingClientRect.top<=0||t.isIntersecting;$share.classList.toggle("u-none",n)},o=new window.IntersectionObserver(s,intersectionObserverOptions);o.observe(n)}const ALGOLIA_APPLICATION_ID="QK9VV9YO5F",ALGOLIA_SEARCH_ONLY_API_KEY="247bb355c786b6e9f528bc382cab3039";let algoliaIndex;const $form=$(".ais-SearchBox-form"),$input=$(".ais-SearchBox-input"),$reset=$(".ais-SearchBox-reset"),$hits=$("#hits");function getAlgoliaIndex(){if(algoliaIndex)return algoliaIndex;console.log("🚀 ~ file: scripts.js ~ line 222 ~ getAlgoliaIndex ~ algoliaIndex",algoliaIndex);const e=window.algoliasearch(ALGOLIA_APPLICATION_ID,ALGOLIA_SEARCH_ONLY_API_KEY,{_useRequestCache:!0});return algoliaIndex=e.initIndex("prod_blog_content"),algoliaIndex}$form.addEventListener("submit",function(e){e.preventDefault()}),$reset.addEventListener("click",function(){$input.value="",$hits.innerHTML=""}),$input.addEventListener("input",async function(e){await loadScript("https://cdn.jsdelivr.net/npm/algoliasearch@4.5.1/dist/algoliasearch-lite.umd.js");const{value:t}=e.target;t===""&&($hits.innerHTML="",$reset.setAttribute("hidden")),$reset.removeAttribute("hidden"),$hits.removeAttribute("hidden");const n=getAlgoliaIndex();n.search(t,{hitsPerPage:3}).then(({hits:e})=>{let t="";e.forEach(e=>{const{link:n,_highlightResult:{title:{value:s},description:{value:o}}}=e;t+=`
      <li class='ais-Hits-item'>
        <a href='${n}'>
          ${s}
          <div>
            <small>${o}</small>
          </div>
        </a>
      </li>`}),$hits.innerHTML=t})});function initTableOfContents(){const e=$("#TableOfContents-container li");if(!e)return null;e.classList.add("active");const t=$$("#TableOfContents-container li a"),n=e=>{e.forEach(e=>{const{target:n,isIntersecting:s,intersectionRatio:o}=e;if(s&&o>=.5){const e=n.getAttribute("id");$("#TableOfContents-container li.active").classList.remove("active"),$(`nav li a[href="#${e}"]`).parentElement.classList.add("active"),t.forEach(e=>{e.addEventListener("click",t=>{$("#TableOfContents-container li.active").classList.remove("active"),e.parentElement.classList.add("active")})})}})},s={threshold:.5,rootMargin:"50px 0px -55% 0px"},o=new window.IntersectionObserver(n,s),i=$$("#article-content h2");i.forEach(e=>o.observe(e))}initTableOfContents(),fetch("https://midudev-apis.midudev.workers.dev/uptime/midudev").then(e=>e.json()).then(({online:e})=>{e&&($("#live").style.display="block",$("#live-frame").innerHTML=`<iframe src="https://player.twitch.tv/?channel=midudev&parent=${document.location.hostname}" frameborder="0" width="320" height="200" allowfullscreen="true" scrolling="no"></iframe>`)}).catch(e=>{console.error(e)}),$("#live-close").addEventListener("click",()=>{$("#live").style.display="none",$("#live").innerHTML=""});async function getPageContent(e){const t=await fetch(e),n=await t.text();return/<body[^>]*>([\w\W]*)<\/body>/.exec(n)[1]}function isBackNavigation(e){return e.navigationType!=="push"&&e.navigationType!=="replace"&&e.destination.index!==-1&&e.destination.index<window.navigation.currentEntry.index}async function onLinkNavigate(e){window.navigation.addEventListener("navigate",t=>{const n=new URL(t.destination.url);if(window.location.origin!==n.origin)return;const s=window.location.pathname,o=isBackNavigation(t);t.intercept({async handler(){if(t.info==="ignore")return;await e({toPath:n.pathname,fromPath:s,isBack:o})}})})}onLinkNavigate(async({toPath:e})=>{const t=await getPageContent(e);startViewTransition(()=>{document.body.innerHTML=t})});function startViewTransition(e){if(!document.startViewTransition){e();return}document.startViewTransition(e)}document.body.addEventListener("click",e=>{e.target.className==="next-posts"||e.target.className==="prev-posts"?document.documentElement.classList.add("section-posts-animation"):document.documentElement.classList.remove("section-posts-animation")})</script></body></html>